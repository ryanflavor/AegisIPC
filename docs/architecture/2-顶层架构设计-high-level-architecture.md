# **2\. 顶层架构设计 (High Level Architecture)**

## **技术概要**

本系统是一个基于消息队列的异步、高性能进程间通信（IPC）基础设施。其核心技术采用NATS JetStream作为通信骨架，提供持久化的消息传递能力。所有通信内容将采用MessagePack信封格式进行序列化，并深度集成Pydantic进行灵活的、带数据校验的RPC（远程过程调用），以支持任意Python对象类型的传递。整体架构遵循六边形/领域驱动设计原则，确保业务逻辑与技术实现的彻底解耦。

## **架构模式**

* **异步消息驱动 (Async Message-Driven)**: 系统核心为异步模式，服务间通过消息解耦。
* **请求/响应模式 (Request/Reply)**: 在异步消息之上构建可靠的RPC模式。
* **发布/订阅模式 (Publish/Subscribe)**: 支持多对多的通信拓扑。
* **主/备高可用 (Active/Standby HA)**: 关键服务采用“先到先得”的原则确定主备角色，实现自动故障转移。
* **六边形/领域驱动设计 (Hexagonal/DDD)**: 严格分离领域、应用和基础设施层。
